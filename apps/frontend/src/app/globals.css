@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* TEXTOS */
    --foreground: 222 47% 11%;
    /* Dark blue/black for text */
    --muted-foreground: 215 16% 47%;
    /* Gray for secondary text */

    /* ESTRUTURA */
    --background: 0 0% 100%;
    /* Pure white background */
    --card: 0 0% 100%;
    /* White card background */
    --card-foreground: 222 47% 11%;
    /* Dark text on cards */
    --card-border: 214 32% 91%;
    /* Light gray border */
    --card-border-opacity: 1;
    --card-radius: 12px;
    --border: 214 32% 91%;

    /* FEEDBACK */
    --success: 142 76% 36%;
    --success-foreground: 0 0% 100%;
    --warning: 38 92% 50%;
    --warning-foreground: 0 0% 100%;
    --info: 221 83% 53%;
    --info-foreground: 0 0% 100%;

    /* SHADCN COMPATIBILITY */
    --muted: 210 40% 96%;
    --secondary: 210 40% 96%;
    --secondary-foreground: 222 47% 11%;
    --accent: 210 40% 96%;
    --accent-foreground: 222 47% 11%;
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    /* INPUTS (Onde estava o erro) */
    --input: 210 40% 98%;
    --input-foreground: 222 47% 11%;
    --ring: 221 83% 70%;
    /* Ring color for dark mode */

    /* BOTÕES */
    --primary: 221 83% 53%;
    --primary-foreground: 0 0% 100%;
    --primary-hover: 221 83% 45%;
    --cancel: 215 16% 47%;
    --cancel-hover: 215 16% 40%;
    /* Darker hover for cancel button */
    --cancel-foreground: 0 0% 100%;
    --button-radius: 8px;

    /* MENU */
    --menu-background: 0 0% 100%;
    --menu-text: 215 25% 27%;
    --menu-bg-hover: 210 40% 96%;
    --menu-selected-background: 221 83% 95%;
    --menu-selected-text: 221 83% 45%;
    --menu-border: 214 32% 91%;
    --menu-border-opacity: 1;
    --menu-item-radius: 8px;

    /* BADGES */
    --badge-background: 221 83% 53%;
    --badge-text: 0 0% 100%;
    --border-opacity: 1;
    /* Adicionado */

    /* TABELAS */
    --table-header-background: 210 40% 96%;
    /* Cinza bem claro para cabeçalhos */
    --table-header-foreground: 215 25% 27%;
    /* Texto escuro para contraste */
    --table-row-hover: 210 40% 98%;
    /* Um pouco mais escuro no hover */
    --table-border: 214 32% 91%;
    /* Mesma cor da borda do card */

    /* DIVISÓRIAS */
    --divider: 214 32% 88%;
    /* Separador horizontal e vertical de seções */

    /* POPOVER (Dropdowns, Tooltips, etc.) */
    --popover: var(--card);
    --popover-foreground: var(--foreground);
  }

  @media (max-width: 639px) {

    /* Targets screens smaller than Tailwind's 'sm' breakpoint */
    :root {
      --card-radius: 8px;
      /* Reduced radius for mobile */
    }
  }

  .dark {
    /* TEXTOS DARK */
    --foreground: 210 40% 98%;
    --muted-foreground: 215 20% 65%;

    /* ESTRUTURA DARK */
    --background: 222 47% 11%;
    --card: 222 47% 12%;
    --card-foreground: 210 40% 98%;
    --card-border: 217 33% 25%;

    --border: 217 33% 17%;

    /* FEEDBACK DARK */
    --success: 142 76% 20%;
    --success-foreground: 210 40% 98%;
    --warning: 38 92% 30%;
    --warning-foreground: 210 40% 98%;
    --info: 221 83% 40%;
    --info-foreground: 210 40% 98%;
    --border-opacity: 1;
    /* Adicionado para garantir solidez por padrão */

    /* SHADCN COMPATIBILITY DARK */
    --muted: 217 33% 17%;
    --secondary: 217 33% 17%;
    --secondary-foreground: 210 40% 98%;
    --accent: 217 33% 17%;
    --accent-foreground: 210 40% 98%;
    --destructive: 0 63% 31%;
    --destructive-foreground: 210 40% 98%;

    /* INPUTS DARK (Correção do branco no branco) */
    --input: 217 33% 18%;
    --input-foreground: 210 40% 98%;

    /* BOTÕES DARK (Adicionado/Ajustado) */
    --primary: 221 83% 60%;
    /* Lighter primary for dark mode contrast */
    --primary-foreground: 0 0% 100%;
    --primary-hover: 221 83% 70%;
    /* Lighter hover for dark mode */
    --cancel: 215 16% 55%;
    /* Lighter cancel for dark mode contrast */
    --cancel-hover: 215 16% 65%;
    /* Lighter hover for dark mode */
    --cancel-foreground: 0 0% 100%;
    --ring: 221 83% 70%;
    /* Ring color for dark mode */

    /* MENU DARK */
    --menu-background: 222 47% 11%;
    --menu-text: 210 40% 98%;
    --menu-border: 217 33% 17%;
    --menu-border-opacity: 0.5;
    /* Adicionado */

    /* BADGES DARK */
    --badge-background: 221 83% 60%;
    /* Consistent with primary in dark mode */
    --badge-text: 0 0% 100%;

    /* TABELAS DARK */
    --table-header-background: 222 47% 15%;
    /* Um pouco mais claro que o card */
    --table-header-foreground: 210 40% 98%;
    /* Texto claro */
    --table-row-hover: 222 47% 18%;
    /* Um pouco mais claro no hover */
    --table-border: 217 33% 15%;
    /* Mais escuro para não ofuscar no modo dark */

    /* Divisórias DARK */
    --divider: 217 33% 20%;

    /* POPOVER DARK */
    --popover: var(--card);
    --popover-foreground: var(--foreground);
  }
}

@layer components {

  /* Força todos os inputs do sistema a obedecerem as variáveis */
  input,
  textarea,
  select,
  [class*="input"],
  [data-slot="input"],
  .search-input {
    background-color: hsl(var(--input)) !important;
    color: hsl(var(--input-foreground)) !important;
    border-color: hsl(var(--border)) !important;
  }

  /* Campos com role de searchbox e inputs dentro de grupos de busca */
  input[type="search"],
  input[type="text"],
  input[placeholder] {
    background-color: hsl(var(--input)) !important;
    color: hsl(var(--input-foreground)) !important;
  }

  /* Cards com borda controlada */
  .card-custom {
    background-color: hsl(var(--card));
    color: hsl(var(--card-foreground));
    border-radius: var(--card-radius);
    /* ✅ Sintaxe corrigida: hsl(H S% L% / alpha) é válida */
    border: 1px solid hsl(var(--card-border) / var(--card-border-opacity, 1));
  }

  /* Divisória horizontal e vertical controlada por variável */
  .divider-h {
    border-top: 1px solid hsl(var(--divider));
  }

  .divider-v {
    border-right: 1px solid hsl(var(--divider));
  }

  .button-radius-custom {
    border-radius: var(--button-radius);
  }

  .badge-custom {
    background-color: hsl(var(--badge-background)) !important;
    color: hsl(var(--badge-text)) !important;
    padding: 2px 8px;
    font-size: 10px;
    font-weight: 800;
    border-radius: 99px;
  }

  /* Estilos para Tabelas */
  .table {
    @apply w-full caption-bottom text-sm;
    /* Borda externa da tabela */
    border: 1px solid hsl(var(--table-border));
    border-radius: var(--card-radius);
    border-collapse: separate;
    border-spacing: 0;
    overflow: hidden;
  }

  .table-header {
    @apply [&_tr]:border-b;
  }

  .table-body {
    @apply [&_tr:last-child]:border-0;
  }

  .table-footer {
    @apply bg-primary text-primary-foreground font-medium;
  }

  .table-row {
    border-bottom: 1px solid hsl(var(--table-border));
  }

  /* Remove a borda padrão e aplica a cor da variável */
  .table-row:not([data-state=selected]):hover {
    background-color: hsl(var(--table-row-hover));
  }

  .table-head {
    @apply h-12 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px];
    background-color: hsl(var(--table-header-background));
    color: hsl(var(--table-header-foreground));
  }

  .table-cell {
    @apply p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px];
  }

  .table-caption {
    @apply mt-4 text-sm text-muted-foreground;
  }
}